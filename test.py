import streamlit as st
import datetime
import random

# -------------------------
# ë³„ìë¦¬ ê³„ì‚° í•¨ìˆ˜
# -------------------------
def get_zodiac(month, day):
    zodiac_dates = [
        ("ë¬¼ë³‘ìë¦¬", (1, 20), (2, 18)),
        ("ë¬¼ê³ ê¸°ìë¦¬", (2, 19), (3, 20)),
        ("ì–‘ìë¦¬", (3, 21), (4, 19)),
        ("í™©ì†Œìë¦¬", (4, 20), (5, 20)),
        ("ìŒë‘¥ì´ìë¦¬", (5, 21), (6, 21)),
        ("ê²Œìë¦¬", (6, 22), (7, 22)),
        ("ì‚¬ììë¦¬", (7, 23), (8, 22)),
        ("ì²˜ë…€ìë¦¬", (8, 23), (9, 22)),
        ("ì²œì¹­ìë¦¬", (9, 23), (10, 22)),
        ("ì „ê°ˆìë¦¬", (10, 23), (11, 22)),
        ("ì‚¬ìˆ˜ìë¦¬", (11, 23), (12, 21)),
        ("ì—¼ì†Œìë¦¬", (12, 22), (1, 19)),
    ]
    for sign, start, end in zodiac_dates:
        if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
            return sign
    return "ì•Œ ìˆ˜ ì—†ìŒ"

# -------------------------
# ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë°ì´í„° (ì—¬ëŸ¬ ê°œ ì¤€ë¹„ â†’ ë§¤ì¼ ë‹¤ë¥´ê²Œ)
# -------------------------
horoscope_data = {
    "ë¬¼ë³‘ìë¦¬": [
        "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ëŠ” í•˜ë£¨! ğŸ’¡",
        "ì¢‹ì€ ì†Œì‹ì„ ë“£ê²Œ ë  ê±°ì˜ˆìš” ğŸ“©",
        "ì£¼ë³€ ì‚¬ëŒì—ê²Œ ì¹œì ˆí•˜ê²Œ ëŒ€í•˜ë©´ í–‰ìš´ì´ ì™€ìš” ğŸŒˆ"
    ],
    "ë¬¼ê³ ê¸°ìë¦¬": [
        "ë§ˆìŒì´ ë”°ëœ»í•´ì§€ëŠ” í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš” ğŸŒŠ",
        "ì‘ì€ ë°°ë ¤ê°€ í° ê¸°ì¨ì„ ê°€ì ¸ì™€ìš” ğŸŒŸ",
        "ì˜¤ëŠ˜ì€ ì§ê°ì´ ë†€ëë„ë¡ ì˜ ë§ì•„ìš” ğŸ”®"
    ],
    "ì–‘ìë¦¬": [
        "ë„ì „ì •ì‹ ì´ ë¹›ë‚˜ëŠ” ë‚ ! ğŸ”¥",
        "ìš©ê¸°ë¥¼ ë‚´ë©´ ì¢‹ì€ ì¼ì´ ìƒê²¨ìš” ğŸ’ª",
        "ìƒˆë¡œìš´ ì‹œì‘ì´ ì¢‹ì€ ê²°ê³¼ë¡œ ì´ì–´ì ¸ìš” ğŸŒ±"
    ],
    # (ë‹¤ë¥¸ ë³„ìë¦¬ë“¤ë„ 3ê°œì”© ë„£ì–´ì£¼ë©´ ì¢‹ì•„ìš”)
}

# í–‰ìš´ ì•„ì´í…œ + ì‚¬ìš©ë²•
lucky_items = {
    "ğŸ ì‚¬ê³¼": "ì˜¤ëŠ˜ì€ ì‚¬ê³¼ë¥¼ ë¨¹ìœ¼ë©´ í™œë ¥ì´ ë„˜ì³ë‚˜ìš”!",
    "â˜• ì»¤í”¼": "ìƒˆë¡œìš´ ì‚¬ëŒê³¼ ì»¤í”¼ë¥¼ ë§ˆì‹œë©´ ì¢‹ì€ ì¼ì´ ìƒê²¨ìš”!",
    "ğŸ“– ì±…": "ì±…ì—ì„œ ì˜ê°ì„ ì–»ì–´ë³´ì„¸ìš”, ì¢‹ì€ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥¼ ê±°ì˜ˆìš”!",
    "ğŸ§ ì´ì–´í°": "ì¢‹ì•„í•˜ëŠ” ìŒì•…ì„ ë“¤ìœ¼ë©´ ê¸°ë¶„ì´ í•œì¸µ ë°ì•„ì ¸ìš”!",
    "ğŸŒ‚ ìš°ì‚°": "ë¹„ê°€ ì˜¤ì§€ ì•Šì•„ë„ ìš°ì‚°ì„ ì±™ê¸°ë©´ ëœ»ë°–ì˜ í–‰ìš´ì´ ì™€ìš”!",
    "ğŸ€ ë„¤ìí´ë¡œë²„": "ì§€ê°‘ì— ë„£ì–´ë‘ë©´ í•˜ë£¨ê°€ ë°˜ì§ ë¹›ë‚  ê±°ì˜ˆìš”!",
    "ğŸ§¸ ì¸í˜•": "ì¸í˜•ê³¼ í•¨ê»˜ ìˆìœ¼ë©´ ë§ˆìŒì´ ë”°ëœ»í•´ì ¸ìš”!",
    "ğŸ’„ ë¦½ë°¤": "ë¦½ë°¤ì„ ë°”ë¥´ë©´ ì¢‹ì€ ì¸ì—°ì´ ë‹¤ê°€ì™€ìš”!",
    "ğŸ« ì´ˆì½œë¦¿": "ì¹œêµ¬ì—ê²Œ ë‚˜ëˆ ì£¼ë©´ í–‰ë³µì´ ë‘ ë°°ê°€ ë¼ìš”!",
    "ğŸ•¶ï¸ ì„ ê¸€ë¼ìŠ¤": "í–‡ì‚´ ì•„ë˜ì—ì„œ ìì‹ ê°ì´ ë¹›ë‚˜ìš”!"
}

# -------------------------
# ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ë°˜ ëœë¤ ê³ ì •
# -------------------------
today = datetime.date.today()
random.seed(today.toordinal())  # ë‚ ì§œ ê¸°ì¤€ ê³ ì •

zodiac_list = list(horoscope_data.keys())
random.shuffle(zodiac_list)

# -------------------------
# Streamlit ì•± UI
# -------------------------
st.set_page_config(page_title="ì˜¤ëŠ˜ì˜ ë³„ìë¦¬ ìš´ì„¸ (ì˜¤í•˜ì•„ì‚¬)", page_icon="âœ¨", layout="centered")

st.markdown("<h1 style='text-align:center; color:#FF69B4;'>âœ¨ ì˜¤ëŠ˜ì˜ ì˜¤í•˜ì•„ì‚¬ âœ¨</h1>", unsafe_allow_html=True)
st.write("ìƒì¼ì„ ì…ë ¥í•˜ë©´ ì˜¤ëŠ˜ì˜ ë³„ìë¦¬ ìš´ì„¸ì™€ ìˆœìœ„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”! ğŸ€")

birth = st.date_input("ğŸ‚ ë‚˜ì˜ ìƒì¼ì„ ì…ë ¥í•˜ì„¸ìš”:", datetime.date(2000, 1, 1))

if birth:
    zodiac = get_zodiac(birth.month, birth.day)
    st.subheader(f"ğŸŒŸ ë‹¹ì‹ ì˜ ë³„ìë¦¬ëŠ” **{zodiac}** ì…ë‹ˆë‹¤! ğŸŒŸ")

    # ì˜¤ëŠ˜ì˜ ìš´ì„¸ (ì—¬ëŸ¬ ê°œ ì¤‘ ëœë¤)
    if zodiac in horoscope_data:
        daily_fortune = random.choice(horoscope_data[zodiac])
    else:
        daily_fortune = "ì˜¤ëŠ˜ì€ íŠ¹ë³„í•œ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš” âœ¨"
    
    st.markdown(f"<h3 style='color:#FF82AB;'>ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸:</h3>", unsafe_allow_html=True)
    st.info(daily_fortune)

    # ì˜¤ëŠ˜ì˜ ìˆœìœ„
    rank = zodiac_list.index(zodiac) + 1
    st.markdown(f"<h3 style='color:#9370DB;'>ğŸ† ì˜¤ëŠ˜ì˜ ë³„ìë¦¬ ìˆœìœ„: {rank}ìœ„</h3>", unsafe_allow_html=True)

    # ì˜¤ëŠ˜ì˜ í–‰ìš´ ì•„ì´í…œ
    lucky_item, usage = random.choice(list(lucky_items.items()))
    st.success(f"ğŸ ì˜¤ëŠ˜ì˜ í–‰ìš´ ì•„ì´í…œ: {lucky_item}")
    st.warning(f"âœ¨ í–‰ìš´ì„ ë¶€ë¥´ëŠ” ì‚¬ìš©ë²•: {usage}")
