import streamlit as st
import datetime
import random

# -------------------------
# ë³„ìë¦¬ ê³„ì‚° í•¨ìˆ˜
# -------------------------
def get_zodiac(month, day):
    zodiac_dates = [
        ("ë¬¼ë³‘ìë¦¬", (1, 20), (2, 18)),
        ("ë¬¼ê³ ê¸°ìë¦¬", (2, 19), (3, 20)),
        ("ì–‘ìë¦¬", (3, 21), (4, 19)),
        ("í™©ì†Œìë¦¬", (4, 20), (5, 20)),
        ("ìŒë‘¥ì´ìë¦¬", (5, 21), (6, 21)),
        ("ê²Œìë¦¬", (6, 22), (7, 22)),
        ("ì‚¬ììë¦¬", (7, 23), (8, 22)),
        ("ì²˜ë…€ìë¦¬", (8, 23), (9, 22)),
        ("ì²œì¹­ìë¦¬", (9, 23), (10, 22)),
        ("ì „ê°ˆìë¦¬", (10, 23), (11, 22)),
        ("ì‚¬ìˆ˜ìë¦¬", (11, 23), (12, 21)),
        ("ì—¼ì†Œìë¦¬", (12, 22), (1, 19)),
    ]
    for sign, start, end in zodiac_dates:
        if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
            return sign
    return "ì•Œ ìˆ˜ ì—†ìŒ"

# -------------------------
# ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë°ì´í„°
# -------------------------
horoscope_data = {
    "ë¬¼ë³‘ìë¦¬": "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ëŠ” í•˜ë£¨! ğŸ’¡",
    "ë¬¼ê³ ê¸°ìë¦¬": "ë§ˆìŒì´ ë”°ëœ»í•´ì§€ëŠ” í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”. ğŸŒŠ",
    "ì–‘ìë¦¬": "ë„ì „ì •ì‹ ì´ ë¹›ë‚˜ëŠ” ë‚ ! ğŸ”¥",
    "í™©ì†Œìë¦¬": "ê¾¸ì¤€í•¨ì´ í° í˜ì„ ë°œíœ˜í•´ìš”. ğŸ‚",
    "ìŒë‘¥ì´ìë¦¬": "ëŒ€í™” ì†ì—ì„œ í–‰ìš´ì´ ìˆ¨ì–´ìˆì–´ìš”. ğŸ’¬",
    "ê²Œìë¦¬": "ê°€ì¡±ì´ë‚˜ ì¹œêµ¬ì™€ì˜ ì‹œê°„ì´ ì†Œì¤‘í•´ìš”. ğŸ¦€",
    "ì‚¬ììë¦¬": "ìì‹ ê°ì„ ê°€ì§€ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ì™€ìš”. ğŸ¦",
    "ì²˜ë…€ìë¦¬": "ì„¸ì‹¬í•¨ì´ ë‹¹ì‹ ì„ ë¹›ë‚˜ê²Œ í•´ìš”. ğŸŒ¸",
    "ì²œì¹­ìë¦¬": "ê· í˜• ì¡íŒ í•˜ë£¨, ì¡°í™”ê°€ í•„ìš”í•´ìš”. âš–ï¸",
    "ì „ê°ˆìë¦¬": "ì§‘ì¤‘ë ¥ì´ ë†’ì•„ ì„±ê³¼ê°€ ì»¤ì ¸ìš”. ğŸ¦‚",
    "ì‚¬ìˆ˜ìë¦¬": "ì—¬í–‰ì´ë‚˜ ëª¨í—˜ì´ í–‰ìš´ì„ ê°€ì ¸ì™€ìš”. ğŸ¹",
    "ì—¼ì†Œìë¦¬": "ì„±ì‹¤í•¨ì´ ë¹›ë‚˜ëŠ” í•˜ë£¨ì˜ˆìš”. â›°ï¸"
}

lucky_items = ["ğŸ ì‚¬ê³¼", "â˜• ì»¤í”¼", "ğŸ“– ì±…", "ğŸ§ ì´ì–´í°", "ğŸŒ‚ ìš°ì‚°", "ğŸ€ ë„¤ìí´ë¡œë²„", "ğŸ§¸ ì¸í˜•", "ğŸ’„ ë¦½ë°¤", "ğŸ« ì´ˆì½œë¦¿", "ğŸ•¶ï¸ ì„ ê¸€ë¼ìŠ¤"]
good_things = ["ì¹œêµ¬ì—ê²Œ ì—°ë½í•˜ê¸°", "ì¼ì° ì¼ì–´ë‚˜ê¸°", "ì‘ì€ ì„ ë¬¼í•˜ê¸°", "ì‚°ì±…í•˜ê¸°", "ì¢‹ì•„í•˜ëŠ” ìŒì•… ë“£ê¸°", "ì›ƒëŠ” ì–¼êµ´ ìœ ì§€í•˜ê¸°", "í•˜ë£¨ ê³„íš ì„¸ìš°ê¸°"]

# -------------------------
# ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ë°˜ ë³„ìë¦¬ ìˆœìœ„ (ê³ ì •)
# -------------------------
today = datetime.date.today()
random.seed(today.toordinal())  # ë‚ ì§œ ê¸°ì¤€ ê³ ì •ëœ ìˆœìœ„
zodiac_list = list(horoscope_data.keys())
random.shuffle(zodiac_list)

# -------------------------
# Streamlit ì•± UI
# -------------------------
st.set_page_config(page_title="ì˜¤ëŠ˜ì˜ ë³„ìë¦¬ ìš´ì„¸ (ì˜¤í•˜ì•„ì‚¬)", page_icon="âœ¨", layout="centered")

st.markdown("<h1 style='text-align:center; color:#FF69B4;'>âœ¨ ì˜¤ëŠ˜ì˜ ë³„ìë¦¬ ìš´ì„¸ (ì˜¤í•˜ì•„ì‚¬) âœ¨</h1>", unsafe_allow_html=True)
st.write("ìƒì¼ì„ ì…ë ¥í•˜ë©´ ì˜¤ëŠ˜ì˜ ë³„ìë¦¬ ìš´ì„¸ì™€ ìˆœìœ„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”! ğŸ€")

birth = st.date_input("ğŸ‚ ë‚˜ì˜ ìƒì¼ì„ ì…ë ¥í•˜ì„¸ìš”:", datetime.date(2000, 1, 1))

if birth:
    zodiac = get_zodiac(birth.month, birth.day)
    st.subheader(f"ğŸŒŸ ë‹¹ì‹ ì˜ ë³„ìë¦¬ëŠ” **{zodiac}** ì…ë‹ˆë‹¤! ğŸŒŸ")

    # ìš´ì„¸ ë³´ì—¬ì£¼ê¸°
    st.markdown(f"<h3 style='color:#FF82AB;'>ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸:</h3>", unsafe_allow_html=True)
    st.info(horoscope_data[zodiac])

    # ì˜¤ëŠ˜ì˜ ìˆœìœ„
    rank = zodiac_list.index(zodiac) + 1
    st.markdown(f"<h3 style='color:#9370DB;'>ğŸ† ì˜¤ëŠ˜ì˜ ë³„ìë¦¬ ìˆœìœ„: {rank}ìœ„</h3>", unsafe_allow_html=True)

    # í–‰ìš´ ì•„ì´í…œ & ì¢‹ì€ í–‰ë™
    lucky_item = random.choice(lucky_items)
    good_thing = random.choice(good_things)

    st.success(f"ğŸ í–‰ìš´ì˜ ì•„ì´í…œ: {lucky_item}")
    st.warning(f"ğŸ’¡ ì˜¤ëŠ˜ í•˜ë©´ ì¢‹ì€ ì¼: {good_thing}")
