import streamlit as st
import datetime

# -------------------------
# ì˜¤ëŠ˜ ë‚ ì§œ
# -------------------------
today = datetime.date.today().strftime("%Yë…„ %mì›” %dì¼")

# -------------------------
# ì˜¤í•˜ì•„ì‚¬ ìš´ì„¸ ë°ì´í„° (ìƒ˜í”Œ)
# -------------------------
ohasa_data = [
    {"rank": 1, "zodiac": "ìŒë‘¥ì´ìë¦¬", "fortune": "ìƒê°ì§€ë„ ëª»í•œ í˜œíƒì´ ìˆì„ì§€ë„! ì‡¼í•‘í•˜ëŸ¬ ë‚˜ê°€ë³´ì„¸ìš” ğŸ›ï¸", "lucky": "âœ¨ ì´ë§ˆì— ì‚¼ê°í˜•ì„ ê·¸ë ¤ë³´ì„¸ìš”"},
    {"rank": 2, "zodiac": "ì²œì¹­ìë¦¬", "fortune": "ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒê³¼ ê°€ê¹Œì›Œì§ˆ ê¸°íšŒ ğŸ’• ê³µí†µì˜ ê´€ì‹¬ì‚¬ë¡œ ëŒ€í™”í•´ë³´ì„¸ìš”", "lucky": "âœ‰ï¸ í¸ì§€ë¥¼ ì¨ë³´ì„¸ìš”"},
    {"rank": 3, "zodiac": "ë¬¼ë³‘ìë¦¬", "fortune": "ëœ»ë°–ì˜ í–‰ìš´ì´ ì°¾ì•„ì™€ìš” ğŸŒˆ ì§€ê°‘ì„ ì—¬ìœ  ìˆê²Œ ì±™ê¸°ì„¸ìš”", "lucky": "ğŸ¥© ë¶ˆê³ ê¸°ë¥¼ ë¨¹ì–´ë³´ì„¸ìš”"},
    {"rank": 4, "zodiac": "ì‚¬ìˆ˜ìë¦¬", "fortune": "í™œë™ì ì¸ í•˜ë£¨ê°€ í–‰ìš´ì„ ë¶ˆëŸ¬ì™€ìš” ğŸš´", "lucky": "ğŸ“¸ ì‚¬ì§„ì„ ì°ì–´ë³´ì„¸ìš”"},
    {"rank": 5, "zodiac": "ì‚¬ììë¦¬", "fortune": "ì£¼ìœ„ì—ì„œ ì‘ì›ì´ ë”°ë¥´ëŠ” ë‚  ğŸ’ª", "lucky": "ğŸŒ¸ ê½ƒ í–¥ê¸°ë¥¼ ë§¡ì•„ë³´ì„¸ìš”"},
    {"rank": 6, "zodiac": "ê²Œìë¦¬", "fortune": "ë§ˆìŒì´ ë”°ëœ»í•´ì§€ëŠ” í•˜ë£¨ ğŸ€", "lucky": "â˜• ë”°ëœ»í•œ ì°¨ë¥¼ ë§ˆì…”ë³´ì„¸ìš”"},
    {"rank": 7, "zodiac": "ì „ê°ˆìë¦¬", "fortune": "ì§‘ì¤‘í•˜ë©´ ì¢‹ì€ ì„±ê³¼ê°€ ìˆì–´ìš” ğŸ“š", "lucky": "ğŸ–‹ï¸ ë…¸íŠ¸ì— ê¸€ì„ ì ì–´ë³´ì„¸ìš”"},
    {"rank": 8, "zodiac": "ë¬¼ê³ ê¸°ìë¦¬", "fortune": "ì†Œì†Œí•œ ì¦ê±°ì›€ì´ ì°¾ì•„ì™€ìš” ğŸ¶", "lucky": "ğŸ« ë‹¬ì½¤í•œ ê°„ì‹ì„ ì¦ê¸°ì„¸ìš”"},
    {"rank": 9, "zodiac": "ì—¼ì†Œìë¦¬", "fortune": "ì¡°ê¸ˆ ëŠë¦¬ì§€ë§Œ ì•ˆì •ì ì¸ í•˜ë£¨ ğŸ¢", "lucky": "ğŸš¶ ì‚°ì±…ì„ í•´ë³´ì„¸ìš”"},
    {"rank": 10, "zodiac": "ì²˜ë…€ìë¦¬", "fortune": "ë””í…Œì¼ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš” ğŸ”", "lucky": "ğŸ§´ í–¥ìˆ˜ë¥¼ ë¿Œë ¤ë³´ì„¸ìš”"},
    {"rank": 11, "zodiac": "ì–‘ìë¦¬", "fortune": "ì„±ê¸‰í•˜ë©´ ì‹¤ìˆ˜ê°€ ìƒê¸¸ì§€ë„ ğŸ˜µ", "lucky": "ğŸ§˜â€â™€ï¸ ì ì‹œ ëª…ìƒí•´ë³´ì„¸ìš”"},
    {"rank": 12, "zodiac": "í™©ì†Œìë¦¬", "fortune": "ì¡°ê¸ˆ ë‹µë‹µí•œ í•˜ë£¨ ğŸ’­ ë„ˆë¬´ ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”", "lucky": "ğŸ› ë°˜ì‹ ìš•ìœ¼ë¡œ íœ´ì‹í•˜ì„¸ìš”"},
]

# -------------------------
# ìƒì¼ â†’ ë³„ìë¦¬ ê³„ì‚° í•¨ìˆ˜
# -------------------------
def get_zodiac(month, day):
    zodiac_dates = [
        ((3,21),(4,19),"ì–‘ìë¦¬"),
        ((4,20),(5,20),"í™©ì†Œìë¦¬"),
        ((5,21),(6,21),"ìŒë‘¥ì´ìë¦¬"),
        ((6,22),(7,22),"ê²Œìë¦¬"),
        ((7,23),(8,22),"ì‚¬ììë¦¬"),
        ((8,23),(9,22),"ì²˜ë…€ìë¦¬"),
        ((9,23),(10,23),"ì²œì¹­ìë¦¬"),
        ((10,24),(11,22),"ì „ê°ˆìë¦¬"),
        ((11,23),(12,21),"ì‚¬ìˆ˜ìë¦¬"),
        ((12,22),(1,19),"ì—¼ì†Œìë¦¬"),
        ((1,20),(2,18),"ë¬¼ë³‘ìë¦¬"),
        ((2,19),(3,20),"ë¬¼ê³ ê¸°ìë¦¬"),
    ]
    for start, end, sign in zodiac_dates:
        if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
            return sign
    return "ì•Œ ìˆ˜ ì—†ìŒ"

# -------------------------
# Streamlit ì•± UI
# -------------------------
st.set_page_config(page_title="ì˜¤í•˜ì•„ì‚¬ ë³„ìë¦¬ ìš´ì„¸", page_icon="ğŸŒ…", layout="centered")

st.markdown(
    f"""
    <h1 style='text-align:center; color:#FF69B4;'>
        ğŸŒ… ì˜¤ëŠ˜ì˜ ì˜¤í•˜ì•„ì‚¬ ë³„ìë¦¬ ìš´ì„¸ ğŸŒ…
    </h1>
    <p style='text-align:center; font-size:18px;'>
        ì˜¤ëŠ˜ ë‚ ì§œ: {today}
    </p>
    """, unsafe_allow_html=True
)

# -------------------------
# ìƒì¼ ì…ë ¥
# -------------------------
birthday = st.date_input("ğŸ‚ ìƒì¼ì„ ì…ë ¥í•˜ì„¸ìš”:", value=datetime.date(2000,1,1))
my_sign = get_zodiac(birthday.month, birthday.day)

st.markdown(f"### ğŸ”® ë‹¹ì‹ ì˜ ë³„ìë¦¬ëŠ” **{my_sign}** ì…ë‹ˆë‹¤!")

# -------------------------
# ì˜¤ëŠ˜ì˜ ìš´ì„¸ ì°¾ê¸°
# -------------------------
my_fortune = None
for data in ohasa_data:
    if my_sign in data["zodiac"]:
        my_fortune = data
        break

if my_fortune:
    st.markdown(
        f"""
        <div style="background-color:#FFF0F5; padding:20px; border-radius:20px; 
                    box-shadow:2px 4px 10px rgba(0,0,0,0.1); margin-top:20px;">
            <h2 style="color:#FF69B4;">ğŸ† ì˜¤ëŠ˜ì˜ ìˆœìœ„: {my_fortune['rank']}ìœ„</h2>
            <h3>â­ {my_fortune['zodiac']} â­</h3>
            <p>{my_fortune['fortune']}</p>
            <p>ğŸ‘‰ <b>í–‰ìš´ íŒ:</b> {my_fortune['lucky']}</p>
        </div>
        """, unsafe_allow_html=True
    )
else:
    st.warning("í•´ë‹¹ ë³„ìë¦¬ì˜ ìš´ì„¸ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš” ğŸ˜¢")
